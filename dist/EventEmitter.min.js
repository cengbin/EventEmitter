!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).EventEmitter=t()}(this,(function(){"use strict";function e(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function t(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,e(i.key),i)}}function n(e,t,n,r,i){if(!function(e){return"function"==typeof e}(n))throw new TypeError("listener 必须是一个函数！");var o={fn:n,context:r,once:i};return(e._events[t]=e._events[t]||[]).push(o),e}var r=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._events={},this.subscribe=this.on,this.subscribeOnce=this.once,this.publish=this.emit,this.unsubscribe=this.off},r=[{key:"on",value:function(e,t,r){return n(this,e,t,r||this,!1)}},{key:"once",value:function(e,t,r){return n(this,e,t,r||this,!0)}},{key:"emit",value:function(e){var t=this._events[e];if(t){for(var n=arguments.length,r=new Array(n-1),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o++){var f=t[o];f.once&&(this.off(e,f.fn),o--),f.fn.apply(f.context,r)}}return this}},{key:"off",value:function(e,t){var n=this._events[e];if(n){if(t){for(var r=n.length-1;r>=0;r--)if(n[r].fn===t){n.splice(r,1);break}}else delete this._events[e];return this}}},{key:"listeners",value:function(e){return e?this._events[e]:null}}],r&&t(e.prototype,r),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,i}();return r}));
